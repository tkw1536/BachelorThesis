\documentclass[11pt]{article}

%We want to be wider
\usepackage{a4wide}

% Input encoding
\usepackage[utf8]{inputenc}

% Math packages
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsmath}

\usepackage{tikz,stex,amstext}

%Add some color
\usepackage{xcolor}

% WE want colored links instead of ugly boxes
\usepackage[colorlinks=true]{hyperref}
\usepackage{url}

% Ednotes
\usepackage[show]{ed}

% We're actually using a units package, so we might also search this document.
\usepackage{siunitx}
\sisetup{load-configurations = abbreviations}

% BibTex
\usepackage{cite}

\title{Semantic Search for Quantity Expressions\\ \vspace{2 mm} Guided Research Proposal}
\author{Tom Wiesing\\Supervisor: Michael Kohlhase\\Jacobs University, Bremen, Germany}

\date{\today}

\begin{document}

%Title Page
\maketitle
\ednote{Find a Math Co-supervisor}

%The abstract
\begin{abstract}
  In this proposal we describe how to introduce units to MathWebSearch. The aim of the project is build a complete semantics-aware system that searches a corpus of documents for quantity expressions. The project will be based on the existing MathWebSearch system and related technologies.
  \ednote{Spin}
\end{abstract}

%The content pages
\section{Introduction}

In this paper we want to give an approach to Semantic Search for Quantity Expressions. A quantity expression is a scalar together with a physical unit, for example $25 \frac{\text{m}}{\text{s}}$ where $25$ is the scalar and $\frac{\text{m}}{\text{s}}$ the unit. This quantity expression is equivalent to $90 \frac{\text{km}}{\text{h}}$ (with equivalent in this sense meaning it expresses the same quantity) although the units are different. In a semantic search for quantity expressions we want to be able to search for a certain quantity expression and find any equivalent ones as well.

MathWebSearch (MWS for short) is an existing semantics-aware system to search \LaTeX \  documents \footnote{Technically, MWS itself can only search XHTML documents. However with the help of \LaTeX{}ml \cite{Miller:latexml:base} it also handles \LaTeX \ documents. } for mathematical formulae \cite{HamKohPro:man14}. As it is semantics-aware it not only searches for formulae in a simple-minded ``text search'' way but also includes simple transformation rules, such as $a + b = b + a$. Additionally it can deal with wildcards such as $ { \color{red} x} + \sqrt{\color{red} x}$. For this query MWS would deliver forumlae as above where $ { \color{red} x} $ has been substituted with any sub-formula.

So far the transformation system has been used by MWS exclusively for mathmatical forumlae. In this paper we propose an extension for quantity expressions which should prove useful for physicists.
The end user will search, for example, \SI{100}{\degreeCelsius} and also get results which show $212$$^\circ$F or $373.15$K.

This proposal is organised as follows: In section \ref{sec:mws} we shortly describe the existing MathWebSearch system and then proceed in section \ref{sec:extension} to describe in detail the proposed extension. Finally in section \ref{sec:problems_relatedwork} we discuess challenges as well as related work.

\section{An Overview of the existing MathWebSearch system}
\label{sec:mws}

\subsection{The Components of MathWebSearch}

As mentioned above, MathWebSearch is a search engine for forumlae. MWS consists of 3 main components as well as a frontend \footnote{The frontend is not part of MWS directly but rather built on top of the REST API, more on this later. }\cite{KohPro:MWSmanual}.

The backend consists of 3 main components,
\begin{enumerate}
  \item a crawler,
  \item a core system and
  \item a public rest API.
\end{enumerate}

The crawler, as its name suggests, crawls corpera for forumlae. For each corpus MWS uses, a seperate crawler has to be implemented. The crawled formulae are passed to the core system and indexed in an MWS Harvest. The core system is also responsible for parsing queries and sending results back to the REST API. This is done by searching the harvest only. In order to make a semantic search for quantity expressions we will adapt this crawler to find and harvest quantity expression instead.

Because MWS is semantics-aware, the harvest can not only contain the exact formulars that are found in the original corpus but also all versions that are quivalent to it. These are generated with the help of MMT and theory graphs, see sections \ref{sec:mws:mmt} and \ref{sec:mws:tg}

The frontend for MathWebSearch, which is not part of MWS itself but running client-side in a web browser, is written in HTML5, CSS and JavaScript. It accesses the REST backend and depends on MathML support to render Mathematics. When the client enters a \LaTeX{} formular to search for, the \LaTeX{}ml daemon \cite{latexml-daemon} is used to transform the query in content MathML. Next, the client renders the MathML (to show the formular the user is searching for) and then sends the query off to the MWS API. Upon receiving results, the client renders them and links to the original documents.

There are several implementations of frontends and crawlers as well as extensions of MathWebSearch. One particular implementation is capabale of crawling the arXMLiv corpus, which contains approximatly 750.000 documents. A list of demos can be found at \cite{URL:MWSDemo}.

\subsection{Mathematical Theory Modeling with MMT}
\label{sec:mws:mmt}

MMT is a \textbf{M}odule system for \textbf{M}athematical \textbf{T}heories \cite{RabKoh:WSMSML13}. In MMT we can represent mathematical theories, views and imports.

A mathematical theory in MMT is a set of typed symbols and statements. As a simple example, the theory of semigroups can be written down as following:

\begin{tabular}{|l c l|}
  \hline
  \textsf{Semigroup} & &\\\hline
  $G$ & &\\
  $\circ$ & $:$ & $ G \rightarrow G \rightarrow G$\\
  $\scriptstyle \mathsf{assoc}$& $:$ & $(x\circ y)\circ z=x\circ (y\circ z)$\\\hline
\end{tabular}

In the example above \ednote{Check with miancu if the example is correct this way}, we first define the a symbol $G$ (the set of the Semigoup), as well as a (binary) operation $\circ$ and then the law of associativity for the operation $\circ$.

Theories in MMT can be related in two ways, with imports and views. If theory A imports theory B then theory A contains all symbols and statements from theory B. In particular, every satisfiable statement that can be made in theory A is also a satisfiable statement in theory B.

As an example of an import, the theory of a \textit{commutative groups} imports the theory of \textit{groups}. The \textit{commutative group} theory additionally has the axiom of commutativity. We can consider an import as a type of inheritance relation.

In contrast to this a view is a type of interpretation relation. For example, there is a view from the theory of \textit{Monoids} to the theory of \textit{Natural numbers}. Again, a satisfiable statement in the viewed theory can be translated into a satisfiable statement in the target theory.

Thus a theorem in one theory can be translated along views as well as along imports. For example, given a theorem in the theory of groups, we automatically get a theorem in the theory of commutative groups.

\subsection{Using Theory Graphs}
\label{sec:mws:tg}

The theories and their relations can be represented with the help of a graph. This graph is then called theory graph. In figure \ref{graph1} we can see a simple example of a theory graph.

\input{graph1.tex}

Every theory in MMT has a (globally unique) URL, called the MMT URL \ednote{Example URL here}. Furthermore, every theorem in MMT can also be represented via a URI. As explained above, if 2 theories are related via a view or import, theorems can be translated along this relation.

Sometimes it is useful not to write down a theorem explicitly, but only give an existing theorem and translate this along a view or import. The MMT URL of this induced theorem can then be given using the view\ednote{Example URI here}. This URL contains enough information for MMT to generate the theorem in explicit form\cite{IanKohProd:rassmk14}.

In an MWS Harvest we exploit this property of induced theorems. We have several represented theorems, the forumlae in the corpus, and many more induced theorems, other equivalent representations of these formulae. With the help of MMT, the MMT Harvest is built by representing all theses theories (forumlae) explictly.

Applying this principle to quantity expressions, we can consider different units as different theories and different quantity expressions different theorems belonging to their respective unit theories. The unit conversions can then be represented via views. The information on how to translate from one unit to another will be contained within the view. If we know all formulae in a corpus we can then generate an MWS Harvest that contains all the representations. \ednote{Should we move this paragraph to the next section?}

\section{A Semantic Search For Quantity Expressions Based On MathWebSearch}
\label{sec:extension}

We want to build a complete system based on MathWebSearch that can perform a semantic search of quanity expressions on a specific corpus. As such it needs 4 components: (1) \textit{A crawler} that crawls documents for quantity expressions, (2) \textit{a core system} that transforms these quantity expressions and harvests them as described above as well as provides search functionality, (3) \textit{a rest API} that exposes this search functionality and (4) \textit{a frontend} that servers as the end-users interface to the system.

\ednote{Describe the components again}

Furthermore the system will be flexible with respect to
\begin{itemize}
  \item \textit{the quanity expressions it understands, } Adding new units should be a simple process so that the system can be easily extended to also capture rare units and
  \item \textit{the corpus} which should be exchangable easily.
\end{itemize}

The crawler will be based on existing MWS crawlers. As it is very difficult to find and mark up all units in a corpus automatically, we will restrict ourself to an artificial corpus containing only lorem ipsum \ednote{What is my contribution, the exact details are not important. }documents with randomly inserted units. This does not solve the problem of writing a crawler, however it will enable us to build a proof-of-concept system first.

The core system will almost completly be inherited from existing implementations. As it does not search formulae, it has to be made aware of unit translations. This will be done with the help of theory graphs. It is not yet clear how exactly these will look, a speculation can be found below in \ref{sec:problems_relatedwork}.

The rest-based API will have to take the user input from the client and pass the entire quantity expression on to the core system. Once it receives a result, it will have to translate these back into human-readable form and then pass these on to the frontend.

As with the existing system, the frontend will be a web page that incorperates 3 main elements, (1) a search input for a value (2) a search input for a unit and (3) a result page that displays results and links to the found documents.

\section{Challenges and related Work}
\label{sec:problems_relatedwork}

\ednote{Is the section title correct?}

A bigger challenge with the approach will be to find a standardised representation for quantity expressions, mainly for units\footnote{Here, standardised means that all quantity expressions are represented in a standardised, machine-readable fashion, not equivalent quantity expressions being representeted in exactly one way. } \ednote{MathML note OM CDs}.

Because we want to translate between these representations however, it is insufficent to just have such a representation. We additionally need to find a standardised way of translating between units need to exist as well. Because MWS uses Theory Graphs and MMT to translate between equivalent formulae, we will have to write down all units in the form of a theory graph. Translations between units will be represented as views.

To translate between units we could use simple translation formulae such has $x \text{K} = x + 273.15 ^\circ{C} $. However because we want to support composite units (such as meters per second $\frac{\text{m}}{\text{s}}$) as well, this can cause problems. In machine representation \ednote{Seperate problem}, every quantity expression has to have a finite precision representation. When translating between 2 composite units, this can easily cause rounding errors. In particular, when an author gives an approximation of a quantity in a document, they might round differently depending on the units used.

Hence it will not be sufficient to use exact translations. Thus we should search for a range of values instead. This has recently been implemented as an extension to MathWebSearch\cite{MWS:Ranges}. It remains to be seen how exactly these ranges should be used.

Furthermore the units will have to be entered in some fashion \ednote{The same?} in the frontend. While it is trivial to design an interface where a single unit can be entered, it is non-trivial when we want to recognise composite units as well. Furthermore units with (si-)prefixes (such as kilo or mega) can either be recognised seperatly or as part of the unit (multipling directly into the value of the quantity expression). There are several input formats that can be used: AsciiMath, \LaTeX{} and MathML, to name only a few. Independent of the input format, the end result (delivered to the backend of the search engine) will have to be represented in one way.

Finally, there is the problem of choosing a suitable corpus and implementing a crawler which will find and mark up quantity expressions. The latter will be taken on by Stiv Sherko in a seperate effort \cite{proposal:sharko}. The task of finding a suitable corpus is postponed for now. In case there is sufficient time a ycorpus can be marked up manually and crawled afterwards.

%BIBLIOGRAPHY
\bibliography{kwarc,proposal}{}
\bibliographystyle{alpha} %plainurl?
\end{document}
